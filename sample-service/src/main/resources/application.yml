# sample-service/application.yml

# ZCM SDK Configuration (minimal)
zcm:
  sdk:
    service:
      name: sample-service
    config:
      server:
        url: ${CONFIG_SERVER_URL:http://localhost:8888}
    control:
      url: ${ZCM_SDK_CONTROL_URL:http://config-control-service:8080}
    bus:
      kafka:
        bootstrap-servers: ${KAFKA_BROKERS:localhost:9092}
      refresh:
        enabled: true # Enable refresh listener
    ping:
      enabled: true # Enable ping to config-control-service
      fixed-delay: 30000 # 30 seconds
    discovery:
      consul:
        host: consul
        heartbeat:
          enabled: true # Enable Consul heartbeat
        register: true # Enable Consul registration

# Application server port
server:
  port: 8080

# Profile activation
spring:
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  # cloud:
  #   config:
  #     allow-override: true
  #     override-none: true

# Actuator endpoints (SDK auto-exposes refresh/busrefresh)
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
    refresh:
      enabled: true
    busrefresh:
      enabled: true
    env:
      post:
        enabled: true

# Logging
logging:
  level:
    root: INFO
    org.springframework.cloud.config: INFO
    com.example.sample: DEBUG
    com.vng.zing.zcm: DEBUG
    # Disable verbose Consul HTTP wire logs
    org.apache.http.wire: WARN
    org.apache.http.headers: WARN
    # Disable verbose Kafka consumer logs
    org.apache.kafka.clients: WARN
    org.springframework.kafka: INFO
