# Test configuration for E2E tests
server:
  port: 0 # Random port for testing

spring:
  application:
    name: user-rest-spring-service-test
  profiles:
    active: test
  cache:
    type: none # Disable caching for tests
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration

  # Kafka configuration for tests
  kafka:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
    producer:
      acks: all
      retries: 3
      properties:
        enable.idempotence: true
    consumer:
      group-id: user-rest-spring-service-test
      auto-offset-reset: earliest
      enable-auto-commit: false

# Thrift client configuration for tests
thrift:
  host: ${THRIFT_HOST:localhost}
  port: ${THRIFT_PORT:9090}
  timeout: 5000
  retry-attempts: 3

thrift.client:
  host: ${THRIFT_HOST:localhost}
  port: ${THRIFT_PORT:9090}
  timeout: 5000
  retry-attempts: 3
  connection-pool-size: 5

# Application configuration
app:
  name: user-rest-spring-service-test
  version: 1.0.0-test
  environment: test

# Management and monitoring configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
      show-components: always
  metrics:
    enable:
      cache: false
    tags:
      application: user-rest-spring-service-test
      service: user-rest-spring-service-test
      environment: test

# Logging configuration for tests
logging:
  level:
    com.example.rest: INFO
    com.example.user: INFO
    org.springframework.web: WARN
    org.apache.thrift: WARN
    io.micrometer: WARN
    org.testcontainers: INFO
